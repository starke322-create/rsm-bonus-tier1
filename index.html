<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Commission Estimator — RSM Tier 1</title>
  <style>
    :root{
      --brand:#d1006b; --bg:#0b0b10; --panel:#12121a; --muted:#8a8aa0; --text:#e8e8ee;
      --border:#242436; --input:#161622; --focus:#3a3a80; --shadow:0 6px 24px rgba(0,0,0,.35); --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui}
    header{display:flex;align-items:center;gap:14px;padding:18px 22px;border-bottom:1px solid var(--border);background:#111}
    header h1{font-size:18px;margin:0} header .sub{font-size:12px;color:var(--muted)}
    .container{display:grid;grid-template-columns:380px 1fr;gap:18px;padding:18px;max-width:1300px;margin:0 auto}
    @media(max-width:980px){.container{grid-template-columns:1fr}}
    .card{background:#181825;border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .panel{padding:16px}
    .row{display:flex;gap:10px}.row>*{flex:1}
    label{display:block;font-size:12px;color:#cfcfe3;margin:10px 0 6px}
    input[type="number"],select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--input);color:var(--text)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    button{border:1px solid var(--border);background:#222;color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:600}
    button.primary{background:var(--brand);color:#fff;border:none}
    table{width:100%;border-collapse:collapse;font-size:14px;margin-top:10px}
    th,td{padding:8px;border-bottom:1px dashed var(--border);text-align:right}
    th:first-child,td:first-child{text-align:left}
    tfoot td{font-weight:700}
    .muted{color:#8a8aa0}
    .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
    .kpi .box{background:#222;border:1px solid var(--border);border-radius:12px;padding:12px}
    .box .label{font-size:12px;color:#c1c1d6}.box .value{font-size:20px;font-weight:800;margin-top:6px}
    .subrow td{color:#cfcfe3}
  </style>
</head>
<body>
<header>
  <img src="logo.png" alt="Company Logo" style="height:50px; margin-right:12px;"><h1>Commission Estimator — RSM Tier 1</h1>
  <div class="sub">Includes spiffs & detailed bonus line items</div>
</header>

<main class="container">
  <section class="card panel" id="inputs">
    <h2>Attainment</h2>
    <div class="row">
      <div><label for="gross_profit">Gross Profit</label><input type="number" id="gross_profit" step="0.01"></div>
      <div>
        <label for="quintile">Quintile</label>
<select id="quintile">
  <option value="" selected></option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
</select>
      </div>
    </div>
    <div class="row">
      <div><label for="attainment_voice">% to Goal Voice</label><input type="number" id="attainment_voice" step="0.01"></div>
      <div><label for="attainment_bts">% to Goal BTS</label><input type="number" id="attainment_bts" step="0.01"></div>
    </div>
    <div class="row">
      <div><label for="attainment_vaf">% to Goal VAF</label><input type="number" id="attainment_vaf" step="0.01"></div>
      <div><label for="attainment_accessories">% to Goal Accessories</label><input type="number" id="attainment_accessories" step="0.01"></div>
    </div>
    <div class="row">
      <div><label for="attainment_rotating">% to Goal Rotating</label><input type="number" id="attainment_rotating" step="0.01"></div>
      <div><label for="audit_passed">Audit Passed</label>
<select id="audit_passed">
  <option value="" selected></option>
  <option value="1">Yes</option>
  <option value="0">No</option>
</select></div>
    </div>
    <h2>Spiff Bonus</h2>
    <div class="row">
      <div><label><input type="checkbox" id="bonus_achieve_all"> Achieve All (+$300)</label></div>
      <div><label><input type="checkbox" id="bonus_world_class"> World Class (+$500)</label></div>
    </div>
    <div class="row">
      <div><label><input type="checkbox" id="hsi_top15"> Top 15 HSI (+5%)</label></div>
      <div><label><input type="checkbox" id="tfb_top15"> Top 15 TFB (+5%)</label></div>
    </div>
    <div class="row">
      <div><label for="overall_rank">Overall Rank</label><input type="number" id="overall_rank" min="1" step="1"></div>
      <div></div>
    </div>

    <div class="actions">
      <button class="primary" id="calcBtn">Calculate</button>
      <button id="resetBtn">Reset</button>
    </div>
  </section>

  <section class="card panel" id="results">
    <h2>Total Payout</h2>
    <div class="kpi">
      <div class="box"><div class="label">Total</div><div class="value" id="kpiTotal">$0</div></div>
      <div class="box"><div class="label">Pre‑Adj</div><div class="value" id="kpiPreAdj">$0</div></div>
      <div class="box"><div class="label">GP Tier</div><div class="value" id="kpiTier">—</div></div>
    </div>

    <table id="table">
      <thead>
        <tr><th>Line Item</th><th class="muted">Factor</th><th class="muted">Attain</th><th>Notes</th><th>Payout / Δ</th></tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr><td colspan="4">Sub‑Total (components only)</td><td id="subtotal">$0</td></tr>
        <tr><td colspan="4">Quintile Multiplier</td><td id="multOut">× 1.00</td></tr>
        <tr><td colspan="4">Fixed Spiffs</td><td id="fixedSpiffs">$0</td></tr>
        <tr><td colspan="4">Percent Bonuses</td><td id="pctOut">× 1.00</td></tr>
        <tr><td colspan="4">Final</td><td id="finalTotal">$0</td></tr>
      </tfoot>
    </table>
  </section>
</main>

<script>
const $=s=>document.querySelector(s),el=(t,o={})=>Object.assign(document.createElement(t),o),num=v=>+v||0,clamp=(x,a,b)=>Math.max(a,Math.min(b,x)),fmt=x=>new Intl.NumberFormat(undefined,{style:"c[...]
const RULES={clampMin:0.80,clampMax:1.25,tiers:[{label:"> $81,000",min:81000,max:1e12},{label:"$61–81k",min:61000,max:81000},{label:"$46–61k",min:46000,max:61000},{label:"$31–46k",min:31000[...]
function tierIdx(gp){for(let i=0;i<RULES.tiers.length;i++){let t=RULES.tiers[i];if(gp>=t.min&&gp<t.max)return i}return 0}
function compCalc(c,i,t,newHire){if(c.gate&&(i[c.gate.metric]??0)!==c.gate.equals)return{p:0,c:0,f:c.f[t],n:"Gate fail"};const f=c.f[t]||0;let a=i[c.m]||0;if(a<RULES.clampMin)return{p:0,c:a,f,n:"[...]
function rankSpiff(r){if(r===1)return 600;if(r>=2&&r<=5)return 400;if(r>=6&&r<=10)return 300;if(r>=11&&r<=15)return 200;return 0}
function calc(){const i={gp:num($("#gross_profit").value),attainment_voice:num($("#attainment_voice").value),attainment_bts:num($("#attainment_bts").value),attainment_vaf:num($("#attainment_vaf")[...]
  const tIdx=tierIdx(i.gp),tier=RULES.tiers[tIdx]?.label||"—",newHire=i.new_hire===1;let rows=[],sub=0;for(const c of RULES.comps){const r=compCalc(c,i,tIdx,newHire);sub+=r.p;rows.push({n:c.lab[...]
  // Quintile multiplier
  let mult=1;const q=$("#quintile").value;if(q==="1")mult=1.2;else if(q==="2")mult=1.1;else if(q==="3")mult=1;else if(q==="4")mult=0.9;else if(q==="5")mult=0.8;
  const after=sub*mult,multDelta=after-sub;
  let spiffs=[];if(i.ach)spiffs.push({n:"Achieve All Bonus",amt:300});if(i.wc)spiffs.push({n:"World Class Bonus",amt:500});const rs=rankSpiff(i.rank);if(rs>0)spiffs.push({n:`Overall Rank Spiff (R[...]
  let pctItems=[],pctBase=after+spiffTotal;if(i.hsi){let d=pctBase*0.05;pctItems.push({n:"Top 15 HSI",delta:d});pctBase+=d}if(i.tfb){let d=pctBase*0.05;pctItems.push({n:"Top 15 TFB",delta:d});pct[...]
  return{tier,sub,mult,multDelta,rows,spiffs,spiffTotal,pctItems,final:pctBase}
}
function render(){const r=calc();$("#kpiTier").innerText=r.tier;$("#kpiPreAdj").innerText=fmt(r.sub);$("#kpiTotal").innerText=fmt(r.final);const tb=$("#table tbody");tb.innerHTML="";for(const x o[...]
$("#calcBtn").onclick=render;$("#resetBtn").onclick=()=>{document.querySelectorAll("#inputs input").forEach(i=>{if(i.type==="checkbox")i.checked=false;else i.value=""});$("#quintile").value="";re[...]
</script>
</body>
</html>
